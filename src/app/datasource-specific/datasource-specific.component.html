
<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-8">
    <h2> {{dataSource | uppercase}} Unmapped {{entityType | titlecase}} Summary</h2>
    <ol class="breadcrumb">
      <li>
        <a routerLink="/dashboard">...</a>
      </li>
      <li>
        <a routerLink="/curation">Curation Mappings</a>
      </li>
      <li>
        <a routerLink="/{{'curation/'+entityTypeUrl}}"> All {{entityType | titlecase}} Summaries </a>
      </li>
      <li class="active"> {{dataSource | uppercase}} </li>
    </ol>
  </div>
</div>




<div class="wrapper wrapper-content animated fadeInRight">
  <div class="p-w-md m-t-sm col-lg-10 col-lg-offset-1">


      <div class="row" style="margin-top: -10px;">

          <div class="col-lg-12" *ngIf="dataExists">

              <form #mappingForm="ngForm" *ngIf="!submitted" (ngSubmit)="submitCuration()"  novalidate>
              <div class="pdxfinder float-e-margins">
                  <div class="pdxfinder-title">
                      <h5 style="font-weight: bold;" class="testMobile"> <span style="color: #03369D"> {{dataSource | uppercase}}  </span> - Unmapped {{entityType | titlecase}} Summary  </h5>
                      <button style="float: right; margin-top:-7px;" class="btn btn-primary btn-sm" type="submit" [disabled]="mappingForm.form.invalid"> Submit Mapping </button>
                  </div>





                  <div class="pdxfinder-content">

                      <div class="table-responsive">

                              <table class="table table-striped table-bordered table-hover" >
                                  <thead>
                                  <tr>
                                      <!-- <th style="width:10px;">S/N</th> -->

                                      <th *ngFor="let columnHeader of columnHeaders ">

                                          {{columnHeader | uppercase}}

                                      </th>

                                      <!--
                                      <th> SOURCE </th>
                                      <th> DIAGNOSIS </th>
                                      <th> TUMOR TYPE </th>
                                      <th> PRIMARY TUMOR </th>
                                      -->
                                      <th> MAPPED TERM </th>
                                      <th> TYPE </th>
                                      <th>JUSTIFICATION</th>
                                  </tr>
                                  </thead>
                                  <tbody>

                                  <tr class="pdxfinder-clickable-rows2" *ngFor="let mapping of mappings; index as i" [routerLink]="['suggested-mapping',mapping.entityId ]" (click)="setClickedRow(i,mapping.entityId)" [class.active]="i == selectedRow">

                                      <!-- <td> {{i+1}} </td> -->

                                      <td *ngFor="let dataLabel of dataLabels ">

                                          {{ mapping.mappingValues[dataLabel] | uppercase }}

                                      </td>

                                     <!--  {{ mapping.mappingValues.SampleDiagnosis | uppercase }}  <td> {{ mapping.mappingValues.SampleDiagnosis | uppercase }} </td>
                                      <td> {{ mapping.mappingValues.TumorType | uppercase }} </td>
                                      <td> {{ mapping.mappingValues.OriginTissue | uppercase }} </td> -->

                                      <td> <input type="text" name="{{'mappedTerm'+i}}" class="editableField"
                                                  [(ngModel)]="mapping.mappedTerm"
                                                  value="{{ mapping.mappedTermLabel }}"
                                                  required [class.is-invalid]="'mappedTerm'+i.invalid && 'mappedTerm'+i.touched"> </td>

                                      <td> <input type="text" name="{{'mapType'+i}}" class="editableField" #curatorMapType
                                                  (input)="mapping.mapType=curatorMapType.value"
                                                  value="{{ mapping.mapType }}"
                                                  required [class.is-invalid]="'mapType'+i.invalid && 'mapType'+i.touched"> </td>

                                      <td> <input type="text" name="{{'justification'+i}}" class="editableField"
                                                  [(ngModel)]="mapping.justification"
                                                  value="{{ mapping.justification }}"
                                                  required [class.is-invalid]="'justification'+i.invalid && 'justification'+i.touched"> </td>
                                  </tr>

                                  </tbody>
                              </table>

                              <ul class="pagination pagination-sm" style="margin-top:-3px; margin-bottom:0px;">

                                  <li [ngClass]="{'disabled': data.page == 1 }">
                                      <span *ngIf="data.page == 1"> First « </span>
                                      <a *ngIf="data.page != 1"  [routerLink]="['../1']"> First « </a>
                                  </li>

                                  <li *ngFor="let count of pageRange " [ngClass]="{'active': data.page == count }">

                                      <!-- <a [routerLink]="['../'+count]"> {{count }} </a>
                                      <a [routerLink]="['../']" [queryParams]="{page: count}"  > {{count }} </a>    {{'curation/'+entityTypeUrl+'/'+dataSource}} +'?page='+count -->

                                      <a [routerLink]="['../'+count]"> {{count }} </a>
                                  </li>


                                  <li [ngClass]="{'disabled': data.page == data.totaPages }">
                                      <span *ngIf="data.page == data.totaPages"> Last « </span>
                                      <a *ngIf="data.page != data.totaPages" [routerLink]="['../'+data.totaPages]"> Last « </a>
                                  </li>

                              </ul>

                      </div>
                  </div>
              </div>
              </form>

          </div>
      </div>

  </div>
</div>


<!-- The Suggested Mappings Displayes here as a child route with deeplinked url  (click)="showSuggestedMappings(34)"  [disabled]="mappingForm.form.invalid || topicHasError"  -->
<router-outlet>

</router-outlet>